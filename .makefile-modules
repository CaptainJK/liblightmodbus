ifneq (,$(findstring 01,$(SMODULES)))
$(shell echo "#define LIGHTMODBUS_F01S" >> include/lightmodbus/libconf.h)
MODULES += slave-coils
endif

ifneq (,$(findstring 02,$(SMODULES)))
$(shell echo "#define LIGHTMODBUS_F02S" >> include/lightmodbus/libconf.h)
MODULES += slave-coils
endif

ifneq (,$(findstring 03,$(SMODULES)))
$(shell echo "#define LIGHTMODBUS_F03S" >> include/lightmodbus/libconf.h)
MODULES += slave-registers
endif

ifneq (,$(findstring 04,$(SMODULES)))
$(shell echo "#define LIGHTMODBUS_F04S" >> include/lightmodbus/libconf.h)
MODULES += slave-registers
endif

ifneq (,$(findstring 05,$(SMODULES)))
$(shell echo "#define LIGHTMODBUS_F05S" >> include/lightmodbus/libconf.h)
MODULES += slave-coils
endif

ifneq (,$(findstring 06,$(SMODULES)))
$(shell echo "#define LIGHTMODBUS_F06S" >> include/lightmodbus/libconf.h)
MODULES += slave-registers
endif

ifneq (,$(findstring 15,$(SMODULES)))
$(shell echo "#define LIGHTMODBUS_F15S" >> include/lightmodbus/libconf.h)
MODULES += slave-coils
endif

ifneq (,$(findstring 16,$(SMODULES)))
$(shell echo "#define LIGHTMODBUS_F16S" >> include/lightmodbus/libconf.h)
MODULES += slave-registers
endif

ifneq (,$(findstring 22,$(SMODULES)))
$(shell echo "#define LIGHTMODBUS_F22S" >> include/lightmodbus/libconf.h)
MODULES += slave-registers
endif

ifdef SMODULES
MODULES += slave-base slave-link
endif


ifneq (,$(findstring 01,$(MMODULES)))
$(shell echo "#define LIGHTMODBUS_F01M" >> include/lightmodbus/libconf.h)
MODULES += master-coils
endif

ifneq (,$(findstring 02,$(MMODULES)))
$(shell echo "#define LIGHTMODBUS_F02M" >> include/lightmodbus/libconf.h)
MODULES += master-coils
endif

ifneq (,$(findstring 03,$(MMODULES)))
$(shell echo "#define LIGHTMODBUS_F03M" >> include/lightmodbus/libconf.h)
MODULES += master-registers
endif

ifneq (,$(findstring 04,$(MMODULES)))
$(shell echo "#define LIGHTMODBUS_F04M" >> include/lightmodbus/libconf.h)
MODULES += master-registers
endif

ifneq (,$(findstring 05,$(MMODULES)))
$(shell echo "#define LIGHTMODBUS_F05M" >> include/lightmodbus/libconf.h)
MODULES += master-coils
endif

ifneq (,$(findstring 06,$(MMODULES)))
$(shell echo "#define LIGHTMODBUS_F06M" >> include/lightmodbus/libconf.h)
MODULES += master-registers
endif

ifneq (,$(findstring 15,$(MMODULES)))
$(shell echo "#define LIGHTMODBUS_F15M" >> include/lightmodbus/libconf.h)
MODULES += master-coils
endif

ifneq (,$(findstring 16,$(MMODULES)))
$(shell echo "#define LIGHTMODBUS_F16M" >> include/lightmodbus/libconf.h)
MODULES += master-registers
endif

ifneq (,$(findstring 22,$(MMODULES)))
$(shell echo "#define LIGHTMODBUS_F22M" >> include/lightmodbus/libconf.h)
MODULES += master-registers
endif

ifdef MMODULES
MODULES += master-base master-link
endif
